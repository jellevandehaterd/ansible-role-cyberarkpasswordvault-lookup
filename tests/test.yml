#!/usr/bin/env OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES ansible-playbook

---
- hosts: localhost
  connection: local
  vars:
    keywords:
      - 'ansible test'
      - 'foo, bar'
    safe: 'MY_SAFE'
    cyberark_connection:
      validate_certs: False
  roles:
    - ansible-role-cyberarkpasswordvault-lookup
  tasks:
    - debug:
        msg: "Password: {{ item }}"
      with_items: "{{ lookup('cyberarkpasswordvault', keywords, safe=safe)}}"

    - debug:
        msg: "Password: {{ item.password }}"
      loop: "{{ query('cyberarkpasswordvault', keywords, safe=safe, passprops=true) }}"

    - debug:
        msg: "Password: {{ lookup('cyberarkpasswordvault', keyword, safe=safe) }}"
